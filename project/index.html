<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hero Mob - Stage 1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Karla:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="app" class="app" v-cloak>
      <header class="hud">
        <div class="status enemy">
          <div class="label">Enemy Base</div>
          <div class="bar">
            <span :style="{ width: enemyHpPercent + '%' }"></span>
          </div>
          <div class="value">{{ enemyBase.hp }} / {{ baseMaxHp }}</div>
        </div>

        <div class="center">
          <div class="title">Stage 1 Battle Prototype</div>
          <div class="subtitle">Auto-spawn, target nearest, and push to the base.</div>
          <button class="btn" type="button" @click="resetBattle">Restart</button>
        </div>

        <div class="status player">
          <div class="label">Player Base</div>
          <div class="bar">
            <span :style="{ width: playerHpPercent + '%' }"></span>
          </div>
          <div class="value">{{ playerBase.hp }} / {{ baseMaxHp }}</div>
        </div>
      </header>

      <main class="battlefield-shell" ref="battlefieldShellRef">
        <div class="battlefield" ref="battlefieldRef">
          <div class="base enemy" :style="baseStyle('enemy')">
            <span class="base-label">Enemy Base</span>
          </div>
          <div class="base player" :style="baseStyle('player')">
            <span class="base-label">Player Base</span>
          </div>

          <div class="nest enemy" :style="nestStyle('enemy')">
            <div class="nest-label">Enemy Nest</div>
            <div class="nest-hp">
              <span :style="{ width: nestHpPercent('enemy') + '%' }"></span>
            </div>
            <div class="spawn-bar">
              <span :style="{ width: spawnPercent('enemy') + '%' }"></span>
            </div>
          </div>
          <div class="nest player" :style="nestStyle('player')">
            <div class="nest-label">Player Nest</div>
            <div class="nest-hp">
              <span :style="{ width: nestHpPercent('player') + '%' }"></span>
            </div>
            <div class="spawn-bar">
              <span :style="{ width: spawnPercent('player') + '%' }"></span>
            </div>
          </div>

        <div
          v-for="creature in creatures"
          :key="creature.id"
          class="creature"
          :class="[creature.team, { dead: creature.isDead }]"
          :style="creatureStyle(creature)"
        >
            <div class="hp-bar">
              <span :style="{ width: creatureHpPercent(creature) + '%' }"></span>
            </div>
            <div class="creature-body"></div>
          </div>
        </div>

        <div v-if="isGameOver" class="overlay">
          <div class="result">
            <div class="result-title">{{ resultMessage }}</div>
            <div class="result-subtitle">Battle complete. Restart to try again.</div>
            <button class="btn" type="button" @click="resetBattle">Restart Battle</button>
          </div>
        </div>
      </main>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
